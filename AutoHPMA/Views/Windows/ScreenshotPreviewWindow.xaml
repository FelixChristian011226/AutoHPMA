<ui:FluentWindow
    x:Class="AutoHPMA.Views.Windows.ScreenshotPreviewWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="截屏实时预览"
    Width="800"
    Height="600"
    MinWidth="400"
    MinHeight="300"
    WindowStartupLocation="CenterScreen"
    AllowsTransparency="False"
    WindowStyle="SingleBorderWindow"
    ResizeMode="CanResize"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <Border
            x:Name="TitleBar"
            Grid.Row="0"
            Padding="16,8"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
            BorderThickness="0,0,0,1"
            MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <StackPanel Orientation="Horizontal">
                <ui:SymbolIcon
                    Margin="0,0,8,0"
                    Symbol="ScanCamera24" />
                <TextBlock
                    VerticalAlignment="Center"
                    FontWeight="SemiBold"
                    Text="截屏实时预览" />
                <TextBlock
                    x:Name="StatusText"
                    Margin="16,0,0,0"
                    VerticalAlignment="Center"
                    Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                    Text="准备就绪" />
            </StackPanel>
        </Border>

        <!-- 图像显示区域 -->
        <Border
            Grid.Row="1"
            Margin="8"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
            BorderThickness="1"
            CornerRadius="4">
            <Image
                x:Name="PreviewImage"
                Stretch="Uniform" />
        </Border>

        <!-- 控制按钮 -->
        <Border
            Grid.Row="2"
            Padding="16,8"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
            BorderThickness="0,1,0,0">
            <StackPanel
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <ui:Button
                    x:Name="SaveButton"
                    Margin="0,0,8,0"
                    Click="SaveButton_Click"
                    Content="保存当前截图"
                    Icon="{ui:SymbolIcon Save24}" />
                <ui:Button
                    x:Name="CloseButton"
                    Click="CloseButton_Click"
                    Content="关闭"
                    Icon="{ui:SymbolIcon Dismiss24}" />
            </StackPanel>
        </Border>
    </Grid>
</ui:FluentWindow>